<%+header%>

<h2><%:ttl-hotspot-changer Logs%></h2>
<div class="cbi-section">
	<pre id="uh-log-view" style="min-height:280px; overflow:auto; background:#111; color:#eee; padding:12px;"></pre>
	<button class="btn cbi-button cbi-button-apply" onclick="uhRefreshLog()">
		<%:Refresh%>
	</button>
</div>

<script type="text/javascript">
	function uhRenderLog(text) {
		var box = document.getElementById('uh-log-view');
		box.textContent = text || '<%:No log output yet.%>';
		box.scrollTop = box.scrollHeight;
	}

	function uhRefreshLog() {
		XHR.get(L.url('admin/network/ttl-hotspot-changer/action/log'), null, function (x, data) {
			if (!data) {
				uhRenderLog('<%:Failed to load log.%>');
				return;
			}
			uhRenderLog(data.log || '');
		});
	}

	uhRefreshLog();
	window.setInterval(uhRefreshLog, 5000);
</script>

<%+footer%>

